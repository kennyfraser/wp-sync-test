---
UID: 56df3ded00713
post_title: Configuration parameters
post_excerpt: ""
layout: page
published: true
menu_order: 100
page_options_require_authentication: false
page_options_show_link_unauthenticated: false
hide_from_navigation: false
hide_from_related: true
---
<p>These configuration parameters are specified in <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> format in your config.yaml file. During DCOS installation the configuration file is used to generate a customized DCOS build. <!-- A config.yaml template file is available [here][2]. --></p>

<h1><a name="config_cluster"></a>Cluster Configuration</h1>

<p>These parameters specify your cluster configuration in the <code>config_cluster</code> section of the config.yaml file.</p>

<h2><a name="bootstrap-url"></a>bootstrap_url</h2>

<p>This parameter specifies the URI path for the DCOS installer to store the customized DCOS build files, which can be local (<code>bootstrap_url:file:///opt/dcos_install_tmp</code>) or hosted (<code>http://&lt;your-web-server&gt;</code>). By default this is set to <code>file:///opt/dcos_install_tmp</code> in the <code>config.yaml</code> template file, which is the location where the DCOS installer puts your install tarball.</p>

<p><strong>Tip:</strong> This parameter is for advanced users. The default value should work for most installations.</p>

<h2><a name="cluster-name"></a>cluster_name</h2>

<p>This parameter specifies the name of your cluster. For example:</p>

<pre><code>cluster_name: zk-example
</code></pre>

<h2><a name="dns-search"></a>dns_search</h2>

<!-- optional -->

<p>This parameter specifies a space-separated list of domains that are tried when an unqualified domain is entered (e.g. domain searches that do not contain '.'). The Linux implementation of <code>/etc/resolv.conf</code> restricts the maximum number of domains to 6 and the maximum number of characters the setting can have to 256. For more information, see <a href="http://man7.org/linux/man-pages/man5/resolv.conf.5.html">man /etc/resolv.conf</a>.</p>

<p>A <code>search</code> line with the specified contents is added to the <code>/etc/resolv.conf</code> file of every cluster host. <code>search</code> can do the same things as <code>domain</code> and is more extensible because multiple domains can be specified.</p>

<p>In this example, <code>example.com</code> has public website <code>www.example.com</code> and all of the hosts in the datacenter have fully qualified domain names that end with <code>dc1.example.com</code>. One of the hosts in your datacenter has the hostname <code>foo.dc1.example.com</code>. If <code>dns_search</code> is set to 'dc1.example.com example.com', then every DCOS host which does a name lookup of foo will get the A record for <code>foo.dc1.example.com</code>. If a machine looks up <code>www</code>, first <code>www.dc1.example.com</code> would be checked, but it does not exist, so the search would try the next domain, lookup <code>www.example.com</code>, find an A record, and then return it.</p>

<pre><code>dns_search: dc1.example.com dc1.example.com example.com dc1.example.com dc2.example.com example.com
</code></pre>

<h2><a name="docker-remove"></a>docker_remove_delay</h2>

<!-- optional -->

<p>This parameter specifies the amount of time to wait before removing the Docker image generated by the installer. It is recommended that you accept the default value 1 hour.</p>

<h2><a name="exhibitor-storage"></a>exhibitor_storage_backend</h2>

<p>This parameter specifies the type of Exhibitor storage backend. During DCOS installation, a storage system is required for configuring and orchestrating Zookeeper with Exhibitor on the master nodes. Exhibitor automatically configures your Zookeeper installation on the master nodes during your DCOS installation. The available options are <code>zookeeper</code>, <code>aws_s3</code>, and <code>shared_filesystem</code>:</p>

<ul>
<li><dl>
<dt>zookeeper</dt>
<dd>
<ul>
<li><dl>
<dt>exhibitor_zk_hosts</dt>
<dd>This parameter specifes the location of a bootstrap ZooKeeper (ZK) instance. This ZK instance must be a production cluster that is separate from the DCOS internal ZK instance. This cluster is only used for configuring the internal Exhibitor instances. Specify the value as a comma-separated list of one or more ZK node IP addresses, and the port number.</dd>
</dl>

<p><strong>Tip:</strong> You can set up a temporary ZK bootstrap instance by running this command on your installer machine. This temporary ZK instance is for testing purposes only and should not be used in a production environment:</p>

<pre><code>docker run -d -p 2181:2181 -p 2888:2888 -p 3888:3888 jplock/zookeeper
</code></pre>

<p>And then set the <code>exhibitor_zk_hosts</code> key to a value of <code>$INSTALLER_HOST_IP_ADDRESS:2181</code>.</p></li>
<li><dl>
<dt>exhibitor_zk_path</dt>
<dd>This parameter specifies the filepath that Exhibitor uses to store data, including the zoo.cfg file.</dd>
</dl></li>
</ul>
</dd>
</dl>

<p>Here is a ZK example, where the <code>$INSTALLER_HOST_IP_ADDRESS</code> is <code>10.10.10.1</code> and <code>$PORT</code> is <code>2181</code>:</p>

<pre><code>exhibitor_storage_backend: zookeeper
exhibitor_zk_hosts: 10.10.10.1:2181
exhibitor_zk_path: /zk-example
</code></pre></li>
<li><p>aws_s3 :</p>

<ul>
<li><dl>
<dt>aws_access_key_id</dt>
<dd>This parameter specifies AWS key ID.</dd>
</dl></li>
<li><dl>
<dt>aws_region</dt>
<dd>This parameter specifies AWS region for your S3 bucket.</dd>
</dl></li>
<li><dl>
<dt>aws_secret_access_key</dt>
<dd>This parameter specifies AWS secret access key.</dd>
</dl></li>
<li><dl>
<dt>s3_bucket</dt>
<dd>This parameter specifies name of your S3 bucket.</dd>
</dl></li>
<li><dl>
<dt>s3_prefix</dt>
<dd>This parameter specifies S3 prefix to be used within your S3 bucket to be used by Exhibitor.</dd>
</dl>

<p>Here is an aws_s3 example:</p>

<pre><code>exhibitor_storage_backend: aws_s3
aws_access_key_id: AKIAIOSFODNN7EXAMPLE
aws_secret_access_key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
aws_region: us-west-2
s3_bucket: mybucket
s3_prefix: s3-example
</code></pre></li>
<li><p>shared_filesystem :</p>

<ul>
<li>exhibitor_fs_config_dir : This parameter specifies the absolute path to the folder that Exhibitor uses to coordinate its configuration. This should be a directory inside of a Network File System (NFS) mount. For example, if every master has <code>/fserv</code> mounted via NFS, set as <code>exhibitor_fs_config_dir: /fserv/dcos-exhibitor</code>.</li>
</ul>

<p><strong>Important:</strong> With <code>shared_filesystem</code>, all masters must must have the NFS volume mounted and <code>exhibitor_fs_config_dir</code> must be inside of it. If any of your servers are missing the mount, the DCOS cluster will not start.</p>

<p>Here is a shared_filesystem example:</p>

<pre><code>exhibitor_storage_backend: shared_filesystem
exhibitor_fs_config_dir: /shared-mount
</code></pre></li>
</ul></li>
</ul>

<h2><a name="gc-delay"></a>gc_delay</h2>

<!-- optional -->

<p>This parameter specifies th maximum amount of time to wait before cleaning up the executor directories. It is recommended that you accept the default value of 2 days.</p>

<h2><a name="master"></a>master_discovery</h2>

<p>This parameter specifies the Mesos master discovery method:</p>

<ul>
<li><dl>
<dt>static</dt>
<dd>
<p>Use the Mesos agents to discover the masters by giving each agent a static list of master IPs. The masters must not change IP addresses, and if a master is replaced, the new master must take the old master's IP address. For example:</p>

<pre><code>master_discovery: static
</code></pre>
</dd>
</dl>

<ul>
<li><dl>
<dt>master_list</dt>
<dd>
<p>Specify a list of your static master IP addresses as a YAML nested series (<code>-</code>). For example:</p>

<pre><code>master_list:
- 172.17.10.101
- 172.17.10.102
- 172.17.10.103
</code></pre>

<p><strong>Important:</strong> Master nodes must be listed in both the <code>master_list</code> and <code>target_hosts</code> parameters.</p>
</dd>
</dl></li>
</ul></li>
<li><dl>
<dt>vrrp</dt>
<dd>
<p>Use keepalived with a VIP. You are required to maintain this VIP infrastructure. For example:</p>

<pre><code>master_discovery: vrrp
</code></pre>
</dd>
</dl>

<ul>
<li><dl>
<dt>keepalived_router_id</dt>
<dd>
<p>Specify the virtual router ID of the keepalived cluster. You must use the same virtual router ID across your cluster. For example:</p>

<pre><code>keepalived_router_id: 51
</code></pre>
</dd>
</dl></li>
<li><dl>
<dt>keepalived_interface</dt>
<dd>
<p>Specify the interface that keepalived uses. For example:</p>

<pre><code>keepalived_interface: eth1
</code></pre>
</dd>
</dl></li>
<li><dl>
<dt>keepalived_pass</dt>
<dd>
<p>If you've set your auth to PASS, specify the same password that you set in your configuration file. For example:</p>

<pre><code>keepalived_pass: $MY_STRONG_PASSWORD
</code></pre>
</dd>
</dl></li>
<li><dl>
<dt>keepalived_virtual_ipaddress</dt>
<dd>
<p>Specify the VIP in use by your keepalived cluster. For example:</p>

<pre><code>keepalived_virtual_ipaddress: 67.34.242.55
</code></pre>
</dd>
</dl></li>
</ul></li>
</ul>

<h2><a name="num-masters"></a>num_masters</h2>

<p>If <code>master_discovery: vrrp</code>, this parameter specifies the number of Mesos masters in your DCOS cluster. For example:</p>

<pre><code>num_masters: 3
</code></pre>

<p><strong>Important:</strong> If <code>master_discovery: static</code>, do not use the <code>num_masters</code> parameter.</p>

<h2><a name="resolvers"></a>resolvers</h2>

<p>This required parameters specifies a YAML-formatted nested series (<code>-</code>) of DNS resolvers for your DCOS host nodes, or accept the default value of <code>8.8.8.8</code>. Set this parameter to the most authoritative nameservers that you have. If you want to resolve internal hostnames, set it to a nameserver that can resolve them. If you have no internal hostnames to resolve, it is acceptable to set this to a public nameserver like Google or AWS. For example:</p>

<pre><code>resolvers: - 8.8.8.8 - 8.8.4.4
</code></pre>

<p><em>Caution:</em> If you set the <code>resolvers</code> parameter incorrectly, you will permanently damage your configuration and have to reinstall DCOS.</p>

<h2><a name="roles"></a>roles</h2>

<p>This parameter specifies the Mesos roles to delegate to this node or accept the default value of <code>slave_public</code>. For more information, see <a href="https://open.mesosphere.com/reference/mesos-master/#roles" target="_blank">Mesos roles</a>.</p>

<ul>
<li><dl>
<dt>slave_public</dt>
<dd>
<p>Runs the public agent node. This is the default value. For example:</p>

<pre><code>roles: slave_public
</code></pre>
</dd>
</dl></li>
<li><dl>
<dt>master</dt>
<dd>
<p>Runs the master node. For example:</p>

<pre><code>roles: master
</code></pre>
</dd>
</dl></li>
<li><dl>
<dt>slave</dt>
<dd>
<p>Runs the private agent node. For example:</p>

<pre><code>roles: slave
</code></pre>
</dd>
</dl></li>
</ul>

<h2><a name="weights"></a>weights</h2>

<p><!-- optional --> This parameter specifies the priority of the role or accept the default value of</p>

<p><code>weights: slave_public=1</code>. For more information, see <a href="https://open.mesosphere.com/reference/mesos-master/#weights" target="_blank">Mesos weights</a>.</p>

<h1><a name="ssh_config"></a>SSH Configuration</h1>

<p>These parameters specify the SSH credentials for your cluster in the <code>ssh_config</code> section of the config.yaml file. This information is used during DCOS installation for <code>--preflight</code>, <code>--deploy</code>, <code>--postflight</code>, and <code>--clean-dcos</code> checks.</p>

<ul>
<li>It's recommended to rotate keys in the cluster after deployment.</li>
<li>It's recommended to copy your private SSH key to the <code>genconf/</code> directory that is mounted to <code>/genconf</code> inside the installer Docker container. If you change this to a path on the host machine, the installer can't find the key because <code>/genconf</code> is mounted by default in the installer script.</li>
</ul>

<dl>
<dt><a name="log_directory"></a>log_directory</dt>
<dd>
<p>This parameter specifies the path to the installer host logs from the SSH processes. By default this is set to <code>/genconf/logs</code>. This should not be changed because <code>/genconf</code> is local to the container that is running the installer, and is a mounted volume. For example:</p>

<pre><code>log_directory: /genconf/logs
</code></pre>
</dd>

<dt><a name="process_timeout"></a>process_timeout</dt>
<dd>
<p>This parameter specifies the allowable amount of time, in seconds, for an action to begin after the process forks. This parameter is not the complete process time. The default value is 120 seconds.</p>
</dd>
</dl>

<p><strong>Tip:</strong> If have a slower network environment, consider changing to <code>process_timeout: 600</code>.</p>

<dl>
<dt><a name="ssh_key_path"></a>ssh_key_path</dt>
<dd>
<p>This parameters specifies the path to the installer uses to log into the target nodes. By default this is set to <code>/genconf/ssh_key</code>. This parameter should not be changed because <code>/genconf</code> is local to the container that is running the installer, and is a mounted volume.</p>
</dd>

<dt><a name="ssh_port"></a>ssh_port</dt>
<dd>
<p>This parameter specifies the default SSH port. For example:</p>

<pre><code>ssh_port: `22`
</code></pre>
</dd>

<dt><a name="ssh_user"></a>ssh_user</dt>
<dd>
<p>This parameter specifies the default SSH username that is used to SSH into the target machines during installation. Users must have root privileges on the host machines. For example:</p>

<pre><code>ssh_user: vagrant
</code></pre>
</dd>

<dt><a name="target_hosts"></a>target_hosts</dt>
<dd>
<p>This parameter specifies a complete list of IPv4 addresses to your agent and master nodes. This must be a YAML-formatted nested series (<code>-</code>). For example:</p>

<pre><code>target_hosts: 
- &lt;target-host-1&gt; 
- &lt;target-host-2&gt; 
- &lt;target-host-3&gt; 
- &lt;target-host-4&gt; 
- &lt;target-host-5&gt;
</code></pre>

<p><strong>Important:</strong> Master nodes must be listed in both the <code>master_list</code> and <code>target_hosts</code> parameters.</p>
</dd>
</dl>

<h1><a name="examples1"></a>Example YAML configuration files</h1>

<h4>DCOS cluster with 3 masters, an Exhibitor/Zookeeper backed by Zookeeper, master list specified, Google DNS resolvers, and SSH configuration specified</h4>

<!-- You can find this configuration in the config.yaml [template file][3]. -->

<pre><code>    cluster_config:
      bootstrap_url: 'file:///opt/dcos_install_tmp'
      cluster_name: '&lt;cluster-name&gt;'
      exhibitor_storage_backend: zookeeper
      exhibitor_zk_hosts: &lt;host1&gt;:&lt;port1&gt;
      exhibitor_zk_path: /dcos
      master_discovery: static 
      master_list:
      - &lt;master-ip-1&gt;
      - &lt;master-ip-2&gt;
      - &lt;master-ip-3&gt;
      resolvers:
      - &lt;dns-resolver-1&gt;
      - &lt;dns-resolver-2&gt;

    ssh_config:
      log_directory: /genconf/logs
      process_timeout: 120
      ssh_key_path: /genconf/ssh-key
      ssh_port: '&lt;port-number&gt;'
      ssh_user: &lt;username&gt;
      target_hosts:
      - &lt;target-host-1&gt;
      - &lt;target-host-2&gt;
      - &lt;target-host-3&gt;
      - &lt;target-host-4&gt;
      - &lt;target-host-5&gt;
</code></pre>

<h4><a name="shared"></a>DCOS cluster with 3 masters, an Exhibitor/Zookeeper shared filesystem storage backend, Internal DNS</h4>

<pre><code>cluster_config:
  cluster_name: fs-example
  master_discovery: static
  exhibitor_storage_backend: shared_filesystem
  exhibitor_fs_config_dir: /shared-mount
  bootstrap_url: file:///tmp/dcos
  resolvers:
  - 0.10.5.1
  - 10.10.6.1
  roles: slave_public
  weights: slave_public=1

ssh_config:
  log_directory: /genconf/logs
  process_timeout: 120
  ssh_key_path: /genconf/ssh-key
  ssh_port: '&lt;port-number&gt;'
  ssh_user: &lt;username&gt;
  target_hosts:
  - &lt;target-host-1&gt;
  - &lt;target-host-2&gt;
  - &lt;target-host-3&gt;
  - &lt;target-host-4&gt;
  - &lt;target-host-5&gt;
</code></pre>

<h4><a name="aws"></a>DCOS Cluster with 3 masters, an Exhibitor/Zookeeper backed by an AWS S3 bucket, and AWS DNS</h4>

<pre><code>cluster_config:
  cluster_name: s3-example
  master_discovery: static
  exhibitor_storage_backend: aws_s3
  aws_access_key_id: AKIAIOSFODNN7EXAMPLE
  aws_secret_access_key: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
  aws_region: us-west-2
  s3_bucket: mybucket
  s3_prefix: s3-example
  bootstrap_url: file:///tmp/dcos
  resolvers: 
  - 169.254.169.253
  roles: slave_public
  weights: slave_public=1

ssh_config:
  log_directory: /genconf/logs
  process_timeout: 120
  ssh_key_path: /genconf/ssh-key
  ssh_port: '&lt;port-number&gt;'
  ssh_user: &lt;username&gt;
  target_hosts:
  - &lt;target-host-1&gt;
  - &lt;target-host-2&gt;
  - &lt;target-host-3&gt;
  - &lt;target-host-4&gt;
  - &lt;target-host-5&gt;
</code></pre>

<h4><a name="zk"></a>DCOS cluster with 3 masters, an Exhibitor/Zookeeper backed by Zookeeper, Google DNS</h4>

<pre><code>cluster_config:
    cluster_name: zk-example
    num_masters: 3
    exhibitor_storage_backend: zookeeper
    exhibitor_zk_hosts: 10.10.10.1:2181
    exhibitor_zk_path: /zk-example
    bootstrap_url: file:///tmp/dcos
    master_discovery: vrrp
    keepalived_router_id: 51
    keepalived_interface: eth1
    keepalived_pass: $MY_STRONG_PASSWORD
    keepalived_virtual_ipaddress: 67.34.242.55
    resolvers: 
    - 8.8.8.8
    - 8.8.4.4
    roles: slave_public
    weights: slave_public=1

ssh_config:
    log_directory: /genconf/logs
    process_timeout: 120
    ssh_key_path: /genconf/ssh-key
    ssh_port: '&lt;port-number&gt;'
    ssh_user: &lt;username&gt;
    target_hosts:
    - &lt;target-host-1&gt;
    - &lt;target-host-2&gt;
    - &lt;target-host-3&gt;
    - &lt;target-host-4&gt;
    - &lt;target-host-5&gt;
</code></pre>