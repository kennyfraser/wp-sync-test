---
UID: 56df3ded17388
post_title: Configuration Parameters (1.2)
post_excerpt: ""
layout: page
published: true
menu_order: 100
page_options_require_authentication: false
page_options_show_link_unauthenticated: false
hide_from_navigation: false
hide_from_related: false
---
<p>Here are the <span class="caps">DCOS</span> cluster configuration parameters. The <span class="caps">DCOS</span> build uses these parameters to create a customized install.</p>

<h1>Parameters</h1>

<dl>
<dt><a name="bootstrap-url"></a>bootstrap_url <!-- optional --></dt>
<dd>
<p>This parameter specifies the path to the customized <span class="caps">DCOS</span> build files. This location can be local (<code>"bootstrap_url":"file:///tmp/dcos"</code>) or hosted (<code>http://&lt;your-web-server&gt;</code>). The <span class="caps">DCOS</span> installer uses this path to locate the <span class="caps">DCOS</span> build files.</p>
</dd>

<dt><a name="cluster-name"></a>cluster_name</dt>
<dd>
<p>This parameter specifies the name of your cluster. For example, <code>"cluster_name": "zk-example"</code>.</p>
</dd>

<dt><a name="docker-remove"></a>docker_remove_delay <!-- optional --></dt>
<dd>
<p><em>For <span class="caps">DCOS</span> <span class="caps">1.3</span> and later:</em> This parameter specifies the amount of time to wait before removing the Docker image generated by the installer. It is recommended that you accept the default value 1 hour.</p>
</dd>

<dt><a name="gc-delay"></a>gc_delay <!-- optional --></dt>
<dd>
<p><em>For <span class="caps">DCOS</span> <span class="caps">1.3</span> and later:</em> This parameter specifies th maximum amount of time to wait before cleaning up the executor directories. It is recommended that you accept the default value of 2 days.</p>
</dd>

<dt><a name="ip-detect"></a>ip_detect_filename <!-- optional --></dt>
<dd>
<p><em>For <span class="caps">DCOS</span> <span class="caps">1.3</span> and later:</em> This parameter specifies the filename of your <span class="caps">IP</span> detect script. For example, <code>"ip_detect_filename":"ip-detect"</code>.</p>
</dd>

<dt><a name="exhibitor-storage"></a>exhibitor_storage_backend</dt>
<dd>
<p>This parameter specifies the name of Exhibitor storage backend. During <span class="caps">DCOS</span> installation, a storage system is required for configuring and orchestrating Zookeeper with Exhibitor on the master nodes. Exhibitor automatically configures your Zookeeper installation on the master nodes during your <span class="caps">DCOS</span> installation. The available options are <code>zookeeper</code>, <code>aws_s3</code>, and <code>shared_filesystem</code>:</p>

<ul>
<li><dl>
<dt>zookeeper</dt>
<dd></dd>
</dl>

<ul>
<li><dl>
<dt>exhibitor_zk_hosts</dt>
<dd>This parameter specifies a comma-separated list of one or more Zookeeper node <span class="caps">IP</span> addresses to use for configuring the internal Exhibitor instances. Exhibitor uses this Zookeeper cluster to orchestrate it’s configuration.</dd>
</dl></li>
<li><dl>
<dt>exhibitor_zk_path</dt>
<dd>This parameter specifies the filepath that Exhibitor uses to store data, including the zoo.cfg file.</dd>
</dl></li>
</ul>

<p>Here is a zookeeper example:</p>

<pre><code>"exhibitor_storage_backend": "zookeeper",
    "exhibitor_zk_hosts": "10.10.10.1:2181",
    "exhibitor_zk_path": "/zk-example",
</code></pre></li>
<li><dl>
<dt>aws_s3</dt>
<dd></dd>
</dl>

<ul>
<li><dl>
<dt>aws_access_key_id</dt>
<dd>This parameter specifies <span class="caps">AWS</span> key <span class="caps">ID.</span></dd>
</dl></li>
<li><dl>
<dt>aws_region</dt>
<dd>This parameter specifies <span class="caps">AWS</span> region for your <span class="caps">S3</span> bucket.</dd>
</dl></li>
<li><dl>
<dt>aws_secret_access_key</dt>
<dd>This parameter specifies <span class="caps">AWS</span> secret access key.</dd>
</dl></li>
<li><dl>
<dt>s3_bucket</dt>
<dd>This parameter specifies name of your <span class="caps">S3</span> bucket.</dd>
</dl></li>
<li><dl>
<dt>s3_prefix</dt>
<dd>This parameter specifies <span class="caps">S3</span> prefix to be used within your <span class="caps">S3</span> bucket to be used by Exhibitor.</dd>
</dl></li>
</ul>

<p>Here is an aws_s3 example:</p>

<pre><code>"exhibitor_storage_backend": "aws_s3",
   "aws_access_key_id": "AKIAIOSFODNN7EXAMPLE",
   "aws_secret_access_key": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
   "aws_region": "us-west-2",
   "s3_bucket": "mybucket",
   "s3_prefix": "s3-example",
</code></pre></li>
<li><dl>
<dt>shared_filesystem</dt>
<dd></dd>
</dl>

<ul>
<li><dl>
<dt>exhibitor_fs_config_dir</dt>
<dd>This parameter specifies the absolute path to the folder that Exhibitor uses to coordinate its configuration. This should be a directory inside of a Network File System (<span class="caps">NFS</span>) mount. For example, if every master has <code>/fserv</code> mounted via <span class="caps">NFS</span>, set as <code>"exhibitor_fs_config_dir": "/fserv/dcos-exhibitor"</code>.</dd>
</dl>

<p><strong>Important:</strong> With <code>shared_filesystem</code>, all masters must must have the <span class="caps">NFS</span> volume mounted and <code>exhibitor_fs_config_dir</code> must be inside of it. If any of your servers are missing the mount, the <span class="caps">DCOS</span> cluster will not start.</p></li>
</ul>

<p>Here is a shared_filesystem example:</p>

<pre><code>"exhibitor_storage_backend": "shared_filesystem",
    "exhibitor_fs_config_dir": "/shared-mount",
</code></pre></li>
</ul>
</dd>

<dt><a name="master"></a>master_discovery</dt>
<dd>
<p>This parameter specifies the Mesos master discovery method:</p>
</dd>
</dl>

<!-- Removed. It only does stuff for AWS, Azure currently. Cody 10/21/15 
- cloud_dynamic
  : For cloud environment only: Use an external proxy for the masters that lives at a static IP, for example, haproxy or nginx. For example, `"master_discovery":"cloud_dynamic"`. -->

<ul>
<li>static : Use the Mesos agents to discover the masters by giving each agent a static list of master IPs. The masters must not change <span class="caps">IP</span> addresses, and if a master is replaced, the new master must take the old master’s <span class="caps">IP</span> address. For example, <code>"master_discovery":"static"</code>. * master_list : <em>For <span class="caps">DCOS</span> <span class="caps">1.3</span> and later:</em> Specify a <span class="caps">JSON</span>-formatted list of your static master <span class="caps">IP</span> addresses. This must be specified in <span class="caps">JSON</span> list format. For example, <code>"master_list": "["172.17.10.101", "172.17.10.102", "172.17.10.103"]"</code>.</li>
</ul>

<p><!-- REmoved CM3. 
- vrrp
  : *For DCOS 1.3 and later:* Use keepalived with a VIP. You are required to maintain this VIP infrastructure. For example, `"master_discovery":"vrrp"`.
  
  - keepalived_router_id
    : Specify the virtual router ID of the keepalived cluster. You must use the same virtual router ID across your cluster. For example, `"keepalived_router_id":"51"`.
     
  - keepalived_interface
    : Specify the interface that keepalived uses. For example, `"keepalived_interface":"eth1"`.
    
  - keepalived_pass
    : If you've set your auth to PASS, specify the same password that you set in your configuration file. For example, `"keepalived_pass":"$MY_STRONG_PASSWORD"`.
    
  - keepalived_virtual_ipaddress
    : Specify the VIP in use by your keepalived cluster. For example, `"keepalived_virtual_ipaddress":"67.34.242.55"`. --> &lt;!-- 

<a name="master-lb"></a>master_lb <!-- master_lb "it depends" on what you set "master_discovery" to. this is deprecated in CM.3 

: *For DCOS 1.2 and earlier:* This parameter specifies the IP address of the load balancer in front of the Mesos masters that distributes workloads. This address is used to access the DCOS web interface. For example, `"master_lb": "10.10.20.1"`. --></p>

<dl>
<dt><a name="num-masters"></a>num_masters</dt>
<dd>
<p>This parameter specifies the number of Mesos masters in your <span class="caps">DCOS</span> cluster. For example, <code>"num_masters": 3</code>.</p>
</dd>

<dt><a name="release_name"></a>release_name</dt>
<dd>
<p><em>For <span class="caps">DCOS</span> <span class="caps">1.2</span> and earlier:</em> This parameter specifies the release name. For example, <code>"release_name":"mycluster"</code>.</p>
</dd>

<dt><a name="repository-url"></a>repository_url</dt>
<dd>
<p><em>For <span class="caps">DCOS</span> <span class="caps">1.2</span> and earlier:</em> This parameter specifies the <span class="caps">HTTP</span> location that the hosts tarball (<code>/tmp/bootstrap.tar.xz</code>) uses to download. For example, <code>"repository_url":"file:///tmp/dcos"</code>.</p>
</dd>

<dt><a name="resolvers"></a>resolvers</dt>
<dd>
<p>This required parameters specifies a <span class="caps">JSON</span>-formatted list of <span class="caps">DNS</span> resolvers for your <span class="caps">DCOS</span> host nodes or accept the default value of <code>["8.8.8.8"]</code>. Set this parameter to the most authoritative nameservers that you have. If you want to resolve internal hostnames, set it to a nameserver that can resolve them. If you have no internal hostnames to resolve, it is acceptable to set this to a public nameserver like Google or <span class="caps">AWS.</span> For example, <code>"resolvers": "["8.8.8.8", "8.8.4.4"]"</code>.</p>

<p><em>Caution:</em> If you set the <code>resolvers</code> parameter incorrectly, you will permanently damage your configuration and have to reinstall <span class="caps">DCOS.</span></p>
</dd>

<dt><a name="roles"></a>roles</dt>
<dd>
<p>This parameter specifies the Mesos roles to delegate to this node or accept the default value of <code>"slave_public"</code>:</p>
</dd>
</dl>

<ul>
<li><dl>
<dt>slave_public</dt>
<dd>Runs the public agent node. This is the default value. For example, <code>"roles":"slave_public"</code>.</dd>
</dl></li>
<li><dl>
<dt>master</dt>
<dd>Runs the master node. For example, <code>"roles":"master"</code>.</dd>
</dl></li>
<li><dl>
<dt>slave</dt>
<dd>Runs the private agent node. For example, <code>"roles":"slave"</code>.</dd>
</dl></li>
</ul>

<p>For more information, see <a href="https://open.mesosphere.com/reference/mesos-master/#roles" target="_blank">Mesos roles</a>.</p>

<dl>
<dt><a name="weights"></a>weights</dt>
<dt><!-- optional --></dt>
<dd>This parameter specifies the priority of the role or accept the default value of <code>"weights": "slave_public=1"</code>. For more information, see <a href="https://open.mesosphere.com/reference/mesos-master/#weights" target="_blank">Mesos weights</a>.</dd>
</dl>

<h1>JSON configuration files examples</h1>

<h4 id="json-configuration-for-shared-file-system-storage-backend"><span class="caps">JSON</span> configuration for shared file system storage backend</h4>

<ol>
<li><p>Customize this <code>config.json</code> template file for your environment.</p>

<pre><code>{
"bootstrap_url":"file:///tmp/dcos",
"cluster_name": "&lt;cluster-name&gt;",
"exhibitor_fs_config_dir":"&lt;path-to-exhibitor-config&gt;",
"exhibitor_storage_backend":"shared_filesystem",
"master_discovery":"static",
"master_list":"["&lt;master-ip-1&gt;","&lt;master-ip-2&gt;","&lt;master-ip-3&gt;"]",
"resolvers": "["&lt;dns-resolver-1&gt;"]"
}
</code></pre></li>
<li><p>Specify these parameters for your environment.</p>

<ul>
<li><dl>
<dt>bootstrap_url</dt>
<dd>Specify the path to the customized <span class="caps">DCOS</span> build files, where <code>&lt;workstation_ip&gt;</code> is your workstation <span class="caps">IP</span> address and <code>&lt;your_port&gt;</code> is an accessible port other than port 80. All of the nodes that you want to connect to must be able to access the <code>&lt;workstation_ip&gt;</code>. The <span class="caps">DCOS</span> installer uses this path to locate the <span class="caps">DCOS</span> build files.</dd>
</dl></li>
<li><dl>
<dt><a name="cluster-name"></a>cluster_name</dt>
<dd>Specify the name of your cluster.</dd>
</dl></li>
<li><dl>
<dt>exhibitor_fs_config_dir</dt>
<dd>Specify the absolute path to the folder that Exhibitor uses to coordinate its configuration. This should be a directory inside of a Network File System (<span class="caps">NFS</span>) mount. For example, if every master has /fserv mounted via <span class="caps">NFS</span>, set as <code>"exhibitor_fs_config_dir": "/fserv/dcos-exhibitor"</code>.</dd>
</dl></li>
<li><dl>
<dt>exhibitor_zk_hosts</dt>
<dd>Specify a comma-separated list of one or more Zookeeper node <span class="caps">IP</span> addresses to use for configuring the internal Exhibitor instances. Exhibitor uses this Zookeeper cluster to orchestrate it’s configuration.</dd>
</dl></li>
<li><dl>
<dt>master_list</dt>
<dd>Specify a <span class="caps">JSON</span>-formatted list of your static master <span class="caps">IP</span> addresses. This must be specified in <span class="caps">JSON</span> list format. You must include the escape characters (``) as shown in the template.</dd>
</dl></li>
<li><dl>
<dt><a name="resolvers"></a>resolvers</dt>
<dd>Specify a <span class="caps">JSON</span>-formatted list of <span class="caps">DNS</span> servers for your <span class="caps">DCOS</span> host nodes. You must include the escape characters (``) as shown in the template. Set this parameter to the most authoritative nameservers that you have. If you want to resolve internal hostnames, set it to a nameserver that can resolve them.</dd>
</dl>

<p><em>Caution:</em> If you set the <code>resolvers</code> parameter incorrectly, you will permanently damage your configuration and have to reinstall <span class="caps">DCOS.</span></p></li>
</ul></li>
<li><p>Save as <code>genconf/config.json</code>.</p></li>
</ol>

<h4 id="a-namezkadcos-cluster-with-3-masters-exhibitorzookeeper-backed-by-another-zookeeper-instance-google-dns-boostrap-host-running-nginx-to-distribute-binaries"><a name="zk"></a><span class="caps">DCOS</span> cluster with 3 masters, Exhibitor/Zookeeper backed by another Zookeeper instance, Google <span class="caps">DNS</span>, bootstrap host running nginx to distribute binaries</h4>

<pre><code>{
    "cluster_name": "zk-example",
    "exhibitor_storage_backend": "zookeeper",
    "exhibitor_zk_hosts": "10.10.10.1:2181",
    "exhibitor_zk_path": "/zk-example",
    "bootstrap_url":"http://10.10.10.1/serve",
    "master_discovery":"static",
    "master_list": "["10.0.0.2","10.0.0.3","10.0.0.4"]",
    "resolvers": "["8.8.8.8", "8.8.4.4"]",
    "roles": "slave_public",
    "weights": "slave_public=1"
}
</code></pre>

<h4 id="a-namezkadcos-cluster-with-3-masters-exhibitorzookeeper-backed-by-another-zookeeper-instance-google-dns"><a name="zk"></a><span class="caps">DCOS</span> cluster with 3 masters, Exhibitor/Zookeeper backed by another Zookeeper instance, Google <span class="caps">DNS</span></h4>

<pre><code>{
    "cluster_name": "zk-example",
    "num_masters": 3,
    "exhibitor_storage_backend": "zookeeper",
    "exhibitor_zk_hosts": "10.10.10.1:2181",
    "exhibitor_zk_path": "/zk-example",
    "repository_url":"file:///tmp/dcos",
    "bootstrap_url":"file:///tmp/dcos",
    "master_discovery":"vrrp",
    "keepalived_router_id":"51",
    "keepalived_interface":"eth1",
    "keepalived_pass":"$MY_STRONG_PASSWORD",
    "keepalived_virtual_ipaddress":"67.34.242.55",
    "resolvers": "["8.8.8.8", "8.8.4.4"]",
    "master_lb": "10.10.20.1",
    "roles": "slave_public",
    "weights": "slave_public=1"
}
</code></pre>

<h4 id="a-namesharedadcos-cluster-with-3-masters-exhibitorzookeeper-backed-by-a-shared-filesystem-mount-internal-dns"><a name="shared"></a><span class="caps">DCOS</span> cluster with 3 masters, Exhibitor/Zookeeper backed by a shared filesystem mount, Internal <span class="caps">DNS</span></h4>

<pre><code>{
    "cluster_name": "fs-example",
    "num_masters": 3,
    "exhibitor_storage_backend": "shared_filesystem",
    "exhibitor_fs_config_dir": "/shared-mount",
    "repository_url":"file:///tmp/dcos",
    "bootstrap_url":"file:///tmp/dcos",
    "resolvers": "["10.10.5.1", "10.10.6.1"]",
    "master_lb": "10.10.20.1",
    "roles": "slave_public",
    "weights": "slave_public=1"
}
</code></pre>

<h4 id="a-nameawsadcos-cluster-with-3-masters-exhibitorzookeeper-backed-by-an-aws-s3-bucket-and-aws-dns"><a name="aws"></a><span class="caps">DCOS</span> Cluster with 3 masters, Exhibitor/Zookeeper backed by an <span class="caps">AWS</span> <span class="caps">S3</span> bucket, and <span class="caps">AWS</span> <span class="caps">DNS</span></h4>

<pre><code>{
    "cluster_name": "s3-example",
    "num_masters": 3,
    "exhibitor_storage_backend": "aws_s3",
    "aws_access_key_id": "AKIAIOSFODNN7EXAMPLE",
    "aws_secret_access_key": "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
    "aws_region": "us-west-2",
    "s3_bucket": "mybucket",
    "s3_prefix": "s3-example",
    "repository_url":"file:///tmp/dcos",
    "bootstrap_url":"file:///tmp/dcos",
    "resolvers": "["169.254.169.253"]",
    "master_lb": "10.10.20.1",
    "roles": "slave_public",
    "weights": "slave_public=1"
}
</code></pre>